:root{
  --bg:#0b0f18; --card:rgba(255,255,255,0.06); --border:rgba(255,255,255,0.18);
  --text:#e8ebf1; --muted:rgba(232,235,241,0.68);
  --accent1:#7c9cff; --accent2:#9a7cff; --accent3:#41d6c3;
  --radius:16px; --shadow:0 12px 32px rgba(0,0,0,0.35);
  font-synthesis-weight:none;
  scroll-behavior:smooth;
}
*{box-sizing:border-box}
html,body{height:100%} body{margin:0;background:var(--bg);color:var(--text);
  font:16px/1.55 -apple-system,BlinkMacSystemFont,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial,system-ui,sans-serif;}

/* background layers */
#bg{position:fixed;inset:0;z-index:-2;overflow:hidden;perspective:1000px}
#bg, #bg > div{will-change:transform,opacity,filter;transform:translateZ(0);backface-visibility:hidden;-webkit-transform:translateZ(0);-webkit-backface-visibility:hidden;contain:paint}
#grad{position:absolute;inset:-25%;filter:blur(45px);
  background:
    radial-gradient(60% 60% at 30% 20%, rgba(124,156,255,.45), transparent 60%),
    radial-gradient(50% 50% at 70% 30%, rgba(154,124,255,.45), transparent 60%),
    radial-gradient(60% 60% at 50% 80%, rgba(65,214,195,.45), transparent 60%);
}
@keyframes shimmer{0%{transform:translateX(-1.2%) translateY(0)}50%{transform:translateX(1.2%) translateY(-0.6%)}100%{transform:translateX(-1.2%) translateY(0)}}
#wave{position:absolute;inset:0;opacity:.25}
#skyline{position:absolute;bottom:0;left:0;width:120%;height:auto;transform:translateY(10px);transition:transform .2s}

/* Reduce background animation intensity on all devices to mitigate flicker */
#bg{animation: powerfulGradient 45s ease infinite, gradientShift 80s linear infinite}

/* Motion accessibility and stability */
@media (prefers-reduced-motion: reduce){
  #bg, #bg > div{animation:none !important;filter:none !important;opacity:.75}
}

/* layout */
.wrap{width:min(1100px,92vw);margin-inline:auto}
.topnav{display:flex;gap:18px;align-items:center;padding:16px 0;position:sticky;top:0;
  backdrop-filter:saturate(180%) blur(10px)}
.topnav a{color:var(--muted);text-decoration:none;font-weight:600;padding:8px 10px;border-radius:999px}
.topnav a:hover{background:var(--card);color:var(--text)} .topnav .spacer{flex:1}

.hero{display:grid;grid-template-columns:120px 1fr;align-items:center;gap:24px;padding:56px 0 32px}
.avatar-ring{width:120px;height:120px;border-radius:50%;padding:3px;
  background:conic-gradient(from 180deg,var(--accent1),var(--accent2),var(--accent3),var(--accent1));box-shadow:var(--shadow);animation:spin 12s linear infinite}
.avatar-ring img{width:100%;height:100%;border-radius:50%;display:block;object-fit:cover;background:#10131c}
@keyframes spin{to{transform:rotate(360deg)}}
.hero-text h1{font-size:clamp(28px,5vw,48px);margin:0 0 8px}
.hero-text .lead{color:var(--muted);margin:0 0 16px;max-width:70ch;min-height:1.8em;border-right:.08em solid rgba(255,255,255,.5)}
.hi{background:linear-gradient(90deg,var(--accent2),var(--accent3));-webkit-background-clip:text;background-clip:text;color:transparent}
.cta{display:flex;gap:12px}.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:12px;text-decoration:none;font-weight:600;border:1px solid var(--border)}
.btn.primary{background:var(--card)} .btn.ghost{background:transparent} .btn:hover{transform:translateY(-1px)}

.section{padding:40px 0} h2{font-size:clamp(22px,4vw,28px);margin:0 0 16px}

.grid{display:grid;gap:18px} .cards{grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
.card{position:relative;border-radius:var(--radius);background:var(--card);border:1px solid var(--border);
  box-shadow:var(--shadow);overflow:hidden;transform-style:preserve-3d;transition:transform .15s ease}
.card .glow{content:"";position:absolute;inset:-1px;padding:1px;border-radius:inherit;
  background:conic-gradient(from 180deg at 50% 50%, rgba(255,255,255,.22), rgba(255,255,255,.04));
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
.card:hover{transform:translateY(-2px)}
.card-body{padding:16px} .card h3{margin:0 0 6px;font-size:18px} .card p{margin:0 0 10px;color:var(--muted)}
.tags{display:flex;flex-wrap:wrap;gap:8px;list-style:none;padding:0;margin:0}
.tags li{padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:12px;color:var(--text);background:rgba(255,255,255,0.04)}

/* fade in on scroll */
.fade{opacity:0;transform:translateY(8px);transition:opacity .6s ease, transform .6s ease}
.fade.in-view{opacity:1;transform:none}

.muted{color:var(--muted)} .small{font-size:12px}

/* terminal */
.terminal{border:1px solid var(--border);border-radius:16px;overflow:hidden;background:rgba(10,12,20,.6);box-shadow:var(--shadow)}
.term-header{display:flex;align-items:center;gap:8px;padding:10px 12px;background:rgba(255,255,255,.04);border-bottom:1px solid var(--border)}
.term-header span{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,.2)} .term-header strong{margin:auto;font-weight:600}
.term-output{min-height:160px;padding:14px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;white-space:pre-wrap}
.term-input{border-top:1px solid var(--border);display:flex} .term-input input{flex:1;background:transparent;color:var(--text);padding:12px 14px;border:0;outline:none}

/* post reader */
body.reader{background:var(--bg)}
.post-reader{width:min(760px,92vw);margin:40px auto}
.post-reader .back{color:var(--muted);text-decoration:none}
.post-reader article{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px}
.post-reader h1{margin-top:0} .post-reader img.cover{width:100%;border-radius:12px;margin:8px 0 12px}
.prose p{color:var(--text)} .prose img{max-width:100%}

/* admin */
body.admin .admin-form{display:grid;gap:12px;max-width:680px}
body.admin input,body.admin textarea{width:100%;background:rgba(255,255,255,.06);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}

/* footer icons */
.icons{display:flex;gap:14px;align-items:center}
.icons a{display:inline-flex;padding:10px;border-radius:12px;border:1px solid var(--border);background:var(--card)}
.icons a:hover{transform:translateY(-1px)}

/* responsive */
@media (max-width:720px){
  .hero{grid-template-columns:1fr;text-align:left}
  .avatar-ring{width:88px;height:88px}
}

/* motion a11y */
@media (prefers-reduced-motion:reduce){
  #grad{animation:none} .avatar-ring{animation:none}
  .fade{transition:none} .card{transition:none}
  .hero-text .lead{border-right:0}
}
:focus-visible{outline:2px solid var(--accent3);outline-offset:2px}
